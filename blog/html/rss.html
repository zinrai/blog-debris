<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>command not found:</title>
        <link>http://127.0.0.1/blog/html/</link>
        <description>Hello World</description>
        <language>en-us</language>
        <pubDate>Tue, 18 Jun 2013 00:00:00 +0900</pubDate>
        <item>
            <link>http://127.0.0.1/blog/html/2013/06/18/centos_cobbler_setup.html</link>
            <guid>http://127.0.0.1/blog/html/2013/06/18/centos_cobbler_setup.html</guid>
            <title><![CDATA[CentOS6.4にCobblerサーバ構築]]></title>
            <description><![CDATA[<div class="section" id="centos6-4cobbler">
<h1>CentOS6.4にCobblerサーバ構築</h1>
<p>サーバ100台くらいにOSインストールする作業が発生するかもしれないので怠けるための作業をメモしておく。まずはCobblerサーバを構築してOSインストールが出来るまで。</p>
<div class="highlight-python"><pre># uname -a
Linux localhost.localdomain 2.6.32-358.11.1.el6.x86_64 #1 SMP Wed Jun 12 03:34:52 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

# cat /etc/centos-release
CentOS release 6.4 (Final)</pre>
</div>
<p>SELinuxを無効にしないとCobblerが動作しない。</p>
<p>下記のファイルを編集して再起動</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># vi /etc/selinux/config</span>
<span class="n">SELINUX</span><span class="o">=</span><span class="n">disabled</span>

<span class="c"># chkconfig xinetd on</span>
<span class="c"># chkconfig httpd on</span>
<span class="c"># chkconfig cobblerd on</span>
<span class="c"># chkconfig dhcpd on</span>
<span class="c"># reboot</span>
</pre></div>
</div>
<div class="highlight-python"><pre># rpm -i http://mirror.symnds.com/distributions/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm
# yum -y install cobbler pykickstart dhcp

# cobbler --version
Cobbler 2.2.3
  source: ?, ?
  build time: Mon Jun 18 01:04:49 2012

# cobbler check
The following are potential configuration items that you may want to fix:

1 : The 'server' field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP for the boot server as reachable by all machines that will use it.
2 : For PXE to be functional, the 'next_server' field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.
3 : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run 'cobbler get-loaders' to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The 'cobbler get-loaders' command is the easiest way to resolve these requirements.
4 : change 'disable' to 'no' in /etc/xinetd.d/rsync
5 : since iptables may be running, ensure 69, 80/443, and 25151 are unblocked
6 : debmirror package is not installed, it will be required to manage debian deployments and repositories
7 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to 'cobbler' and should be changed, try: &quot;openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'&quot; to generate new one
8 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them

Restart cobblerd and then run 'cobbler sync' to apply changes.

# /etc/init.d/cobblerd start

# vi /etc/xinetd.d/rsync
disable = no

# vi /etc/xinetd.d/tftp
disable = no

# vi /etc/cobbler/settings
server: 192.168.0.1
manage_dhcp: 1
next_server: 192.168.0.1

# vi /etc/cobbler/dhcp.template
subnet 192.168.0.0 netmask 255.255.255.0 {
     option routers             192.168.0.254;
     option domain-name-servers 8.8.8.8;
     option subnet-mask         255.255.255.0;
     range dynamic-bootp        192.168.0.200 192.168.0.250;
     filename                   &quot;/pxelinux.0&quot;;
     default-lease-time         21600;
     max-lease-time             43200;
     next-server                $next_server;
}

# /etc/init.d/iptables stop
# /etc/init.d/xinetd restart
# /etc/init.d/cobblerd restart

# cobbler get-loaders
# cobbler sync

# cobbler import --path=rsync://ftp.jaist.ac.jp/pub/Linux/CentOS/6.4/os/x86_64/ --name=CentOS6.4_x86_64
# cobbler sync</pre>
</div>
<p>Cobblerを使いインストールするとデフォルトのパスワードはcobblerとなっている。</p>
<p>変更する場合は</p>
<div class="highlight-python"><pre># cobbler check
The following are potential configuration items that you may want to fix:

1 : debmirror package is not installed, it will be required to manage debian deployments and repositories
2 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to 'cobbler' and should be changed, try: &quot;openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'&quot; to generate new one
3 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them

Restart cobblerd and then run 'cobbler sync' to apply changes.</pre>
</div>
<p>に書いてあるように</p>
<div class="highlight-python"><pre># openssl passwd -1 -salt &quot;cobbler&quot; &quot;password&quot;
$1$cobbler$UTIGTKoLfLdeMAPNxROQZ1</pre>
</div>
<p>を実行して</p>
<div class="highlight-python"><pre># vi /etc/cobbler/settings
default_password_crypted: &quot;$1$cobbler$UTIGTKoLfLdeMAPNxROQZ1&quot;</pre>
</div>
<p>設定ファイルを書き換えてCobblerを再起動</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># /etc/init.d/cobblerd restart</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference external" href="http://www.asahi-net.or.jp/~aa4t-nngk/pxeinstall.html">http://www.asahi-net.or.jp/~aa4t-nngk/pxeinstall.html</a></li>
<li><a class="reference external" href="http://blog.glidenote.com/blog/2012/03/15/cobbler-install">http://blog.glidenote.com/blog/2012/03/15/cobbler-install/</a></li>
</ul>
</div>]]></description>
            <category><![CDATA[ centos ]]></category>
            <category><![CDATA[ cobbler ]]></category>
            <pubDate>Tue, 18 Jun 2013 00:00:00 +0900</pubDate>
        </item>
        <item>
            <link>http://127.0.0.1/blog/html/2013/06/08/ubuntu_mongodb_rails3_setup.html</link>
            <guid>http://127.0.0.1/blog/html/2013/06/08/ubuntu_mongodb_rails3_setup.html</guid>
            <title><![CDATA[Rails3でMongoDBを使ってみる]]></title>
            <description><![CDATA[<div class="section" id="rails3mongodb">
<h1>Rails3でMongoDBを使ってみる</h1>
<div class="highlight-python"><pre>$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.2 LTS
Release:        12.04
Codename:       precise

$ uname -a
Linux ubuntu1204-64-base 3.2.0-45-generic #70-Ubuntu SMP Wed May 29 20:12:06 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

$ rails -v
Rails 3.2.12

$ rails new mongodb_app --skip-active-record

$ cd mongodb_app

$ vi Gemfile
gem 'mongoid'
gem 'bson_ext'

$ bundle install --path vendor/bundle --binstubs

$ bin/rails g mongoid:config
  create  config/mongoid.yml

$ bin/rails g scaffold Post title:string subscription:text

$ cat app/models/post.rb
class Post
  include Mongoid::Document
  field :title, type: String
  field :subscription, type: String
end

$ mongo
&gt; show dbs
mongodb_app_development 0.203125GB
&gt; use mongodb_app_development
&gt; show collections
posts
&gt; db.posts.find()
{ &quot;_id&quot; : ObjectId(&quot;51b1ea5da64aef614e000001&quot;), &quot;title&quot; : &quot;sample&quot;, &quot;subscription&quot; : &quot;text&quot; }
{ &quot;_id&quot; : ObjectId(&quot;51b2afb0a64aef0c3f000001&quot;), &quot;title&quot; : &quot;hogehoge&quot;, &quot;subscription&quot; : &quot;fugafuga&quot; }</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://mongoid.org/en/mongoid">http://mongoid.org/en/mongoid/</a></li>
<li><a class="reference external" href="http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-ruby-on-rails-3">http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-ruby-on-rails-3/</a></li>
</ul>
</div>]]></description>
            <category><![CDATA[ ubuntu ]]></category>
            <category><![CDATA[ mongodb ]]></category>
            <category><![CDATA[ rails ]]></category>
            <pubDate>Sat, 08 Jun 2013 00:00:00 +0900</pubDate>
        </item>
        <item>
            <link>http://127.0.0.1/blog/html/2013/06/05/debian_wheezy_nested_kvm.html</link>
            <guid>http://127.0.0.1/blog/html/2013/06/05/debian_wheezy_nested_kvm.html</guid>
            <title><![CDATA[Debian wheezyでNested KVMを試してみる]]></title>
            <description><![CDATA[<div class="section" id="debian-wheezynested-kvm">
<h1>Debian wheezyでNested KVMを試してみる</h1>
<p><a class="reference external" href="https://code.google.com/p/ganeti">ganeti</a>のbetaを触るのに実機を2,3台用意しないといけないことから開放されそう。</p>
<div class="section" id="kvm">
<h2>KVM インストール</h2>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install install qemu-kvm libvirt-bin virtinst bridge-utils</span>
</pre></div>
</div>
</div>
<div class="section" id="nested-kvm">
<h2>Nested KVM</h2>
<p>Nested KVMを有効にするための設定を行う。</p>
<div class="highlight-python"><pre># modinfo kvm_intel
filename:       /lib/modules/3.2.0-4-amd64/kernel/arch/x86/kvm/kvm-intel.ko
license:        GPL
author:         Qumranet
depends:        kvm
intree:         Y
vermagic:       3.2.0-4-amd64 SMP mod_unload modversions
parm:           vpid:bool
parm:           flexpriority:bool
parm:           ept:bool
parm:           unrestricted_guest:bool
parm:           emulate_invalid_guest_state:bool
parm:           vmm_exclusive:bool
parm:           yield_on_hlt:bool
parm:           fasteoi:bool
parm:           nested:bool
parm:           ple_gap:int
parm:           ple_window:int

# cat /sys/module/kvm_intel/parameters/nested
N

# vi /etc/modprobe.d/kvm-nested.conf
options kvm_intel nested=1

# modprobe -r kvm_intel
# modprobe kvm_intel

# cat /sys/module/kvm_intel/parameters/nested
Y</pre>
</div>
</div>
<div class="section" id="id1">
<h2>仮想マシンの作成</h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="nv">VM_NAME</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">MEM</span><span class="o">=</span><span class="nv">$2</span>
<span class="nv">SIZE</span><span class="o">=</span><span class="nv">$3</span>
<span class="nv">IFACE</span><span class="o">=</span><span class="nv">$4</span>
<span class="nv">OS</span><span class="o">=</span><span class="nv">$5</span>

<span class="nv">DISKIMAGE</span><span class="o">=</span><span class="s2">&quot;/var/lib/libvirt/images/$VM_NAME&quot;</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;centos&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># CentOS 6.4 amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jaist.ac.jp/pub/Linux/CentOS/6.4/os/x86_64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;precise&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Ubuntu 12.04 amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.riken.jp/Linux/ubuntu/dists/precise/main/installer-amd64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;squeeze&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Debian Squeeze amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jp.debian.org/debian/dists/squeeze/main/installer-amd64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;wheezy&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Debian Wheezy amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jp.debian.org/debian/dists/wheezy/main/installer-amd64/'</span>
<span class="k">fi</span>

virt-install --hvm --accelerate --nographics <span class="se">\</span>
  --name <span class="nv">$VM_NAME</span> <span class="se">\</span>
  --network <span class="nv">bridge</span><span class="o">=</span><span class="nv">$IFACE</span>,model<span class="o">=</span>virtio <span class="se">\</span>
  --ram <span class="nv">$MEM</span> <span class="se">\</span>
  --vcpus 1 <span class="se">\</span>
  --cpu core2duo <span class="se">\</span>
  --os-type linux <span class="se">\</span>
  --location <span class="nv">$DIST</span> <span class="se">\</span>
  --disk <span class="nv">path</span><span class="o">=</span><span class="nv">$DISKIMAGE</span>.qcow2,format<span class="o">=</span>qcow2,size<span class="o">=</span><span class="nv">$SIZE</span>,bus<span class="o">=</span>virtio,cache<span class="o">=</span>writethrough <span class="se">\</span>
  --extra-args<span class="o">=</span><span class="s1">'console=tty0 console=ttyS0,115200n8'</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># vm-install.sh debian7_vm 1500 100 br1 wheezy</span>
</pre></div>
</div>
</div>
<div class="section" id="os">
<h2>ゲストOSでの仮想マシン作成</h2>
<p>ゲストOSでKVMのインストールと仮想マシンの作成を行う。</p>
<p>スクリプトは–cpuオプションを取っただけであとは同じ。</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install install qemu-kvm libvirt-bin virtinst bridge-utils</span>
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="nv">VM_NAME</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">MEM</span><span class="o">=</span><span class="nv">$2</span>
<span class="nv">SIZE</span><span class="o">=</span><span class="nv">$3</span>
<span class="nv">IFACE</span><span class="o">=</span><span class="nv">$4</span>
<span class="nv">OS</span><span class="o">=</span><span class="nv">$5</span>

<span class="nv">DISKIMAGE</span><span class="o">=</span><span class="s2">&quot;/var/lib/libvirt/images/$VM_NAME&quot;</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;centos&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># CentOS 6.4 amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jaist.ac.jp/pub/Linux/CentOS/6.4/os/x86_64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;precise&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Ubuntu 12.04 amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.riken.jp/Linux/ubuntu/dists/precise/main/installer-amd64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;squeeze&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Debian Squeeze amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jp.debian.org/debian/dists/squeeze/main/installer-amd64/'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;$OS&quot;</span> <span class="o">=</span> <span class="s2">&quot;wheezy&quot;</span> <span class="o">]</span>; <span class="k">then</span>
  <span class="c"># Debian Wheezy amd64</span>
  <span class="nv">DIST</span><span class="o">=</span><span class="s1">'http://ftp.jp.debian.org/debian/dists/wheezy/main/installer-amd64/'</span>
<span class="k">fi</span>

virt-install --hvm --accelerate --nographics <span class="se">\</span>
  --name <span class="nv">$VM_NAME</span> <span class="se">\</span>
  --network <span class="nv">bridge</span><span class="o">=</span><span class="nv">$IFACE</span>,model<span class="o">=</span>virtio <span class="se">\</span>
  --ram <span class="nv">$MEM</span> <span class="se">\</span>
  --vcpus 1 <span class="se">\</span>
  --os-type linux <span class="se">\</span>
  --location <span class="nv">$DIST</span> <span class="se">\</span>
  --disk <span class="nv">path</span><span class="o">=</span><span class="nv">$DISKIMAGE</span>.qcow2,format<span class="o">=</span>qcow2,size<span class="o">=</span><span class="nv">$SIZE</span>,bus<span class="o">=</span>virtio,cache<span class="o">=</span>writethrough <span class="se">\</span>
  --extra-args<span class="o">=</span><span class="s1">'console=tty0 console=ttyS0,115200n8'</span>
</pre></div>
</div>
<div class="highlight-python"><pre># virsh net-list --all
Name                 State      Autostart
-----------------------------------------
default              inactive   no

# virsh net-start default
# vm-install.sh debian7_nested 500 50 virbr0 wheezy</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://www.debian.org/releases/wheezy">http://www.debian.org/releases/wheezy/</a></li>
<li><a class="reference external" href="http://wiki.debian.org/KVM">http://wiki.debian.org/KVM</a></li>
<li><a class="reference external" href="http://aikotobaha.blogspot.jp/2012/02/kvm-on-kvmnested-kvm.html">http://aikotobaha.blogspot.jp/2012/02/kvm-on-kvmnested-kvm.html</a></li>
</ul>
</div>
</div>]]></description>
            <category><![CDATA[ debian ]]></category>
            <category><![CDATA[ kvm ]]></category>
            <pubDate>Wed, 05 Jun 2013 00:00:00 +0900</pubDate>
        </item>
        <item>
            <link>http://127.0.0.1/blog/html/2013/05/26/ubuntu_mongodb_install.html</link>
            <guid>http://127.0.0.1/blog/html/2013/05/26/ubuntu_mongodb_install.html</guid>
            <title><![CDATA[Ubuntu12.04にMongoDBをインストール]]></title>
            <description><![CDATA[<div class="section" id="ubuntu12-04mongodb">
<h1>Ubuntu12.04にMongoDBをインストール</h1>
<p>積読になっていた「MongoDB イン・アクション」をようやく読み始めた。</p>
<p>「Ubuntu 12.04 amd64」にMongoDBをインストールして手を動かしてみたのでメモしておく。</p>
<p>Railsで使いたいなと思っているところ。</p>
<p>本家のドキュメントにaptでインストール出来ると書いているのでそれに従ってみた。</p>
<div class="section" id="mongodb">
<h2>MongoDB インストール</h2>
<div class="highlight-python"><pre>$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
$ echo 'deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen' | sudo tee /etc/apt/sources.list.d/10gen.list
$ sudo apt-get update
$ sudo apt-get install mongodb-10gen</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install mongodb-10gen=2.2.3</span>
</pre></div>
</div>
<p>で指定のVersionをインストールすることが出来る。</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># echo &quot;mongodb-10gen hold&quot; | dpkg --set-selections</span>
</pre></div>
</div>
<p>でインストールしたVersionからアップグレードしないように出来る。</p>
</div>
<div class="section" id="id1">
<h2>MongoDB 操作</h2>
<div class="highlight-python"><pre>$ mongo
MongoDB shell version: 2.4.3
connecting to: test
Welcome to the MongoDB shell.
For interactive help, type &quot;help&quot;.
For more comprehensive documentation, see
        http://docs.mongodb.org/
Questions? Try the support group
        http://groups.google.com/group/mongodb-user

use tutorial

db.users.insert({username: &quot;hoge&quot;})

db.users.find()
{ &quot;_id&quot; : ObjectId(&quot;51a1f5c136f07a662784e8ae&quot;), &quot;username&quot; : &quot;hoge&quot; }

db.users.save({username: &quot;moge&quot;})

db.users.find()
{ &quot;_id&quot; : ObjectId(&quot;51a1f5c136f07a662784e8ae&quot;), &quot;username&quot; : &quot;hoge&quot; }
{ &quot;_id&quot; : ObjectId(&quot;51a1f8d336f07a662784e8af&quot;), &quot;username&quot; : &quot;moge&quot; }

db.users.count()
2

db.users.update({username: &quot;hoge&quot;}, {$set: {country: &quot;canada&quot;}})
db.users.find({username: &quot;hoge&quot;})
{ &quot;_id&quot; : ObjectId(&quot;51a1f5c136f07a662784e8ae&quot;), &quot;country&quot; : &quot;canada&quot;, &quot;username&quot; : &quot;hoge&quot; }

db.users.update({username: &quot;hoge&quot;}, {$unset: {country: 1}})
db.users.find({username: &quot;hoge&quot;})
{ &quot;_id&quot; : ObjectId(&quot;51adf33a197bc318df1ad8ad&quot;), &quot;username&quot; : &quot;hoge&quot; }</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu">http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/</a></li>
</ul>
</div>
</div>]]></description>
            <category><![CDATA[ ubuntu ]]></category>
            <category><![CDATA[ mongodb ]]></category>
            <pubDate>Sun, 26 May 2013 00:00:00 +0900</pubDate>
        </item>
        <item>
            <link>http://127.0.0.1/blog/html/2013/05/20/unbound_nsd.html</link>
            <guid>http://127.0.0.1/blog/html/2013/05/20/unbound_nsd.html</guid>
            <title><![CDATA[Unbound + NSD]]></title>
            <description><![CDATA[<div class="section" id="unbound-nsd">
<h1>Unbound + NSD</h1>
<p>Chef Serverと戯れるときにhostsをいちいち書き換えるのは</p>
<p>面倒なので内部にDNSサーバを立ててみた。</p>
<table border="1" class="docutils">
<caption>Ubuntu 12.04 server amd64</caption>
<colgroup>
<col width="33%"/>
<col width="33%"/>
<col width="33%"/>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>コンテンツサーバ</td>
<td>NSD(3.2.9)</td>
<td>192.168.0.1</td>
</tr>
<tr class="row-even"><td>キャッシュサーバ</td>
<td>Unbound(1.4.16)</td>
<td>192.168.0.2</td>
</tr>
</tbody>
</table>
<div class="section" id="nsd">
<h2>NSD</h2>
<p>今回は正引きだけ設定した。</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install nsd</span>
<span class="c"># cd /etc/nsd3</span>
<span class="c"># cp nsd.conf.sample nsd.conf</span>
<span class="c"># vi nsd.conf</span>
</pre></div>
</div>
<div class="highlight-python"><pre>server:
  ip-address: 192.168.0.1
  hide-version: yes
  ipv4-only: yes
  database: &quot;/etc/nsd3/nsd.conf&quot;
  pidfile: &quot;/etc/nsd3/nsd.pid&quot;
  chroot: &quot;/etc/nsd3&quot;
  username: nsd
  zonedir: &quot;/etc/nsd3&quot;
  difffile: &quot;/etc/nsd3/ixfr.db&quot;
  xfrdfile: &quot;/etc/nsd3/xfrd.state&quot;

zone:
  name: chef.local
  zonefile: chef.local.zone</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># vi chef.local.zone</span>
</pre></div>
</div>
<div class="highlight-python"><pre>$TTL 3600
@ IN SOA ns1.chef.local. postmaster.chef.local. (
  2013052001  ;Serial
  3600        ;Refresh
  1800        ;Retry
  57200       ;Expire
  86400       ;Minimum TTL
)

@ IN  NS  ns1.chef.local.

ns1   IN  A 192.168.0.1
ns2   IN  A 192.168.0.2
www   IN  A 192.168.0.3
hoge  IN  A 192.168.0.4
fuga  IN  A 192.168.0.5
moge  IN  A 192.168.0.6</pre>
</div>
</div>
<div class="section" id="unbound">
<h2>Unbound</h2>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install unbound</span>
<span class="c"># cd /etc/unbound</span>
<span class="c"># zcat `locate unbound.conf | sed -n 2p` &gt; unbound.conf</span>
<span class="c"># vi unbound.conf</span>
</pre></div>
</div>
<div class="highlight-python"><pre>server:
  verbosity: 1
  interface 192.168.0.2
  do-ip6: no
  access-control: 127.0.0.0/8 allow
  access-control: 192.168.0.0/24 allow
  chroot: &quot;etc/unbound&quot;
  username: &quot;unbound&quot;
  directory: &quot;/etc/unbound&quot;
  use-syslog: yes
  pidfile: &quot;/etc/unbound/unbound.pid&quot;

stub-zone:
  name: &quot;chef.local&quot;
  stub-addr: 192.168.0.1</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://unbound.jp">http://unbound.jp/</a></li>
<li><a class="reference external" href="http://unbound.jp/news20110624">http://unbound.jp/news20110624/</a></li>
<li><a class="reference external" href="http://gihyo.jp/admin/feature/01/unbound">http://gihyo.jp/admin/feature/01/unbound</a></li>
</ul>
</div>
</div>]]></description>
            <category><![CDATA[ ubuntu ]]></category>
            <category><![CDATA[ dns ]]></category>
            <category><![CDATA[ nsd ]]></category>
            <category><![CDATA[ unbound ]]></category>
            <pubDate>Mon, 20 May 2013 00:00:00 +0900</pubDate>
        </item>
        <item>
            <link>http://127.0.0.1/blog/html/2013/03/23/tinkerer_github.html</link>
            <guid>http://127.0.0.1/blog/html/2013/03/23/tinkerer_github.html</guid>
            <title><![CDATA[Tinkerer + Github]]></title>
            <description><![CDATA[<div class="section" id="tinkerer-github">
<h1>Tinkerer + Github</h1>
<p>jekyll + Githubを使ってブログを書いていたのだけれどローカルで確認するのにWEBRick動かすということに面倒くささを感じ流らく放置してしまっていた。</p>
<p>もっと手軽な(Sphinxみたいにhtmlが掃き出される)ものはないかと探してみたところTinkererというものを見付けた。</p>
<div class="highlight-python"><pre>$ pip install tinkerer</pre>
</div>
<div class="highlight-python"><pre>$ tinker -s</pre>
</div>
<div class="highlight-python"><pre>$ wget http://dl.dropbox.com/u/218108/files/japanesesupport.py
$ mkdir _exts
$ mv japanesesupport.py _exts
$ hg clone https://bitbucket.org/vladris/tinkerer-contrib
$ cp `find tinkerer-contrib -name withgithub.py` _exts
$ rm -rf tinkerer-contrib
$ touch .nojekyll</pre>
</div>
<div class="section" id="conf-py">
<h2>conf.py 修正</h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s">'tinkerer.ext.blog'</span><span class="p">,</span> <span class="s">'tinkerer.ext.disqus'</span><span class="p">,</span> <span class="s">'japanesesupport'</span><span class="p">,</span> <span class="s">'withgithub'</span><span class="p">]</span>

<span class="c"># Add templates to be rendered in sidebar here</span>
<span class="n">html_sidebars</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;**&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;recent.html&quot;</span><span class="p">,</span> <span class="s">&quot;categories.html&quot;</span><span class="p">,</span> <span class="s">&quot;tags.html&quot;</span><span class="p">,</span> <span class="s">&quot;searchbox.html&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python"><pre>$ tinker -p 'first post'
$ tinker -b
$ git init
$ git add .
$ git commit -m 'first post'
$ git remote add origin git@github.com:zinrai/zinrai.github.com.git
$ git push -u origin master</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://www.tinkerer.me/exts/withgithub.html">http://www.tinkerer.me/exts/withgithub.html</a></li>
<li><a class="reference external" href="http://sphinx-users.jp/reverse-dict/html/japanese.html">http://sphinx-users.jp/reverse-dict/html/japanese.html</a></li>
</ul>
</div>
</div>]]></description>
            <category><![CDATA[ python ]]></category>
            <category><![CDATA[ github ]]></category>
            <pubDate>Sat, 23 Mar 2013 00:00:00 +0900</pubDate>
        </item>
    </channel>
</rss>